<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<textarea type="text" id="myText" rows="3" cols="35" style="resize:none"></textarea><br>
<input type="submit"  id="socketConnection" />
<ul id="serverMessage"></ul>
<p id="shit"></p>

<script>


const socketConnection = document.getElementById("socketConnection");
const para = document.getElementById("serverMessage");
const wss = new WebSocket("ws://localhost:80")  

function ws(){
    
  const webSocketMessages = document.getElementById("myText").value;
  
  const wss = new WebSocket("ws://localhost:80")  

  wss.onopen = ()=>{
    wss.send(JSON.stringify({webSocketMessages}))
  } 
} 

  wss.addEventListener("message", (event)=>{
    let {webSocketMessages} = JSON.parse(event.data)
    const li = document.createElement("li");
    li.innerHTML = webSocketMessages
    para.appendChild(li);
    const reset = document.getElementById("myText").value = "";
  })        
    
socketConnection.addEventListener("click", ws)

  </script>
</body>
</html>
